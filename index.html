<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Multi YouTube Player</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', sans-serif;
    }
    body {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      color: #fff;
      min-height: 100vh;
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 10px;
      background: linear-gradient(90deg, #ff416c, #ff4b2b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .subtitle {
      text-align: center;
      margin-bottom: 20px;
      opacity: 0.8;
    }
    .main {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }
    .controls {
      flex: 1;
      min-width: 280px;
      background: rgba(255,255,255,0.05);
      padding: 20px;
      border-radius: 10px;
    }
    .grid {
      flex: 2;
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
    .video-container {
      background: #000;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      transition: 0.3s;
    }
    .video-container:hover {
      transform: translateY(-3px);
    }
    .video-title {
      padding: 8px;
      font-size: 0.9rem;
      background: rgba(0,0,0,0.7);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .video-btns {
      display: flex;
      gap: 8px;
      padding: 8px;
      background: rgba(0,0,0,0.5);
      justify-content: center;
    }
    .btn {
      background: linear-gradient(90deg, #ff416c, #ff4b2b);
      border: none;
      padding: 8px 12px;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.85rem;
      transition: 0.3s;
    }
    .btn:hover {
      transform: translateY(-2px);
    }
    .btn-danger {
      background: linear-gradient(90deg, #f857a6, #ff5858);
    }
    .btn-secondary {
      background: linear-gradient(90deg, #4776E6, #8E54E9);
    }
    input {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid rgba(255,255,255,0.2);
      background: rgba(0,0,0,0.3);
      color: white;
      margin-bottom: 10px;
    }
    input:focus {
      outline: none;
      border-color: #ff4b2b;
    }
    .layout-controls {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .layout-btn {
      flex: 1;
      text-align: center;
      padding: 8px;
      border-radius: 5px;
      background: rgba(255,255,255,0.1);
      cursor: pointer;
    }
    .layout-btn.active {
      background: linear-gradient(90deg, #ff416c, #ff4b2b);
    }
    @media (max-width: 900px) {
      .main { flex-direction: column; }
    }
  </style>
</head>
<body>
  <h1>Multi YouTube Player</h1>
  <p class="subtitle">Play unlimited YouTube videos at once with full control</p>

  <div class="main">
    <div class="controls">
      <h3>Add Videos</h3>
      <input id="video-url" placeholder="Paste YouTube URL or ID" />
      <button id="add-video" class="btn">Add Video</button>
      <button id="sample" class="btn btn-secondary">Add Samples</button>
      <hr style="margin:20px 0; opacity:0.2;">
      <h3>Global Controls</h3>
      <button id="play-all" class="btn">Play All</button>
      <button id="pause-all" class="btn">Pause All</button>
      <button id="mute-all" class="btn">Mute All</button>
      <button id="unmute-all" class="btn">Unmute All</button>
      <hr style="margin:20px 0; opacity:0.2;">
      <h3>Layout</h3>
      <div class="layout-controls">
        <div class="layout-btn active" data-layout="grid">Grid</div>
        <div class="layout-btn" data-layout="vertical">Vertical</div>
        <div class="layout-btn" data-layout="horizontal">Horizontal</div>
      </div>
      <hr style="margin:20px 0; opacity:0.2;">
      <button id="clear" class="btn btn-danger">Clear All</button>
    </div>

    <div class="grid" id="video-grid">
      <div class="video-container">
        <div style="padding:20px; text-align:center; opacity:0.7;">No videos added yet</div>
      </div>
    </div>
  </div>

  <script>
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    let players = [];
    let count = 0;
    let currentLayout = 'grid';

    function extractId(url) {
      const regex = /^.*(?:youtu\.be\/|v\/|watch\?v=|embed\/)([^#\&\?]{11}).*/;
      const match = url.match(regex);
      return match ? match[1] : url.trim();
    }

    function onYouTubeIframeAPIReady() {}

    document.getElementById("add-video").onclick = () => {
      const val = document.getElementById("video-url").value.trim();
      if (!val) return alert("Enter YouTube URL or ID");
      addVideo(extractId(val));
      document.getElementById("video-url").value = "";
    };

    document.getElementById("sample").onclick = () => {
      ["dQw4w9WgXcQ", "kJQP7kiw5Fk", "9bZkp7q19f0", "JGwWNGJdvx8", "Zi_XLOBDo_Y"].forEach(id => addVideo(id));
    };

    document.getElementById("play-all").onclick = () => players.forEach(p => p.playVideo?.());
    document.getElementById("pause-all").onclick = () => players.forEach(p => p.pauseVideo?.());
    document.getElementById("mute-all").onclick = () => players.forEach(p => p.mute?.());
    document.getElementById("unmute-all").onclick = () => players.forEach(p => p.unMute?.());

    document.getElementById("clear").onclick = () => {
      players = [];
      document.getElementById("video-grid").innerHTML = '<div class="video-container"><div style="padding:20px;text-align:center;opacity:0.7;">No videos added yet</div></div>';
    };

    document.querySelectorAll(".layout-btn").forEach(btn => {
      btn.onclick = () => {
        document.querySelectorAll(".layout-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentLayout = btn.dataset.layout;
        applyLayout();
      };
    });

    function applyLayout() {
      const grid = document.getElementById("video-grid");
      grid.style.display = "grid";
      if (currentLayout === "grid") grid.style.gridTemplateColumns = "repeat(auto-fit, minmax(300px, 1fr))";
      if (currentLayout === "vertical") grid.style.gridTemplateColumns = "1fr";
      if (currentLayout === "horizontal") grid.style.gridTemplateColumns = "repeat(auto-fit, minmax(400px, 1fr))";
    }

    function addVideo(videoId) {
      const grid = document.getElementById("video-grid");
      if (grid.querySelector(".video-container div[style*='No videos added yet']")) grid.innerHTML = "";

      count++;
      const pid = "player-" + count;
      const container = document.createElement("div");
      container.className = "video-container";
      container.innerHTML = `
        <div id="${pid}"></div>
        <div class="video-title">Loading...</div>
        <div class="video-btns">
          <button class="btn mute-btn">Mute</button>
          <button class="btn btn-danger remove-btn">Remove</button>
        </div>
      `;
      grid.appendChild(container);
      applyLayout();

      const player = new YT.Player(pid, {
        height: '200',
        width: '100%',
        videoId: videoId,
        playerVars: { playsinline: 1, rel: 0 },
        events: {
          onReady: e => {
            const title = e.target.getVideoData().title || "Video";
            container.querySelector(".video-title").textContent = title;
          }
        }
      });
      players.push(player);

      container.querySelector(".remove-btn").onclick = () => {
        container.remove();
        players = players.filter(p => p.a.id !== pid);
        if (!document.getElementById("video-grid").children.length) {
          document.getElementById("video-grid").innerHTML = '<div class="video-container"><div style="padding:20px;text-align:center;opacity:0.7;">No videos added yet</div></div>';
        }
      };

      const muteBtn = container.querySelector(".mute-btn");
      muteBtn.onclick = () => {
        const p = players.find(p => p.a.id === pid);
        if (p.isMuted()) { p.unMute(); muteBtn.textContent = "Mute"; }
        else { p.mute(); muteBtn.textContent = "Unmute"; }
      };
    }

    document.getElementById("video-url").addEventListener("keypress", e => {
      if (e.key === "Enter") document.getElementById("add-video").click();
    });
  </script>
</body>
</html>
